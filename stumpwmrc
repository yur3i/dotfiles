(in-package :stumpwm)

(defcommand kill-and-remove () ()
	"Kills the window and removes the frame"
	(kill)
	(remove))

(defcommand vsplit-and-switch () ()
	"Splits vertically and switches to next window"
	(vsplit)
	(fnext))

(defcommand hsplit-and-switch () ()
	"Splits horizontally and switches to next window"
	(hsplit)
	(fnext))

(defcommand hsplit-switch-open-terminal () ()
	"Splits horizontally and opens a terminal in the new window"
	(hsplit)
	(fnext)
	(exec urxvt))

(defcommand vsplit-switch-open-terminal () ()
	"Splits vertically and opens a terminal in the new window"
	(vsplit)
	(fnext)	
	(exec urxvt))


;; keybinds
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-n") "next-in-frame")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-p") "prev-in-frame")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-f") "fnext")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-b") "fprev")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-F") "fselect")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-RET") "exec urxvt")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-d") "exec")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-q") "delete")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-s") "vsplit-and-switch")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-S") "hsplit-and-switch")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-r") "remove")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-R") "kill-and-remove")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-w") "iresize")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-l") "list")


(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-0") "select-window-by-number 0")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-1") "select-window-by-number 1")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-2") "select-window-by-number 2")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-3") "select-window-by-number 3")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-4") "select-window-by-number 4")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-5") "select-window-by-number 5")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-6") "select-window-by-number 6")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-7") "select-window-by-number 7")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-8") "select-window-by-number 8")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-9") "select-window-by-number 9")

(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-)") "pull 0")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-!") "pull 1")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-@") "pull 2")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-#") "pull 3")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-$") "pull 4")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-%") "pull 5")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-^") "pull 6")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-&") "pull 7")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-*") "pull 8")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "s-(") "pull 9")

(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "F8")  "exec wmctrl -xa telegram")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "F9")  "exec wmctrl -xa emacs")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "F10") "exec wmctrl -xa firefox")
(stumpwm:define-key stumpwm:*top-map* (stumpwm:kbd "F11") "exec wmctrl -xa urxvt")

(stumpwm:define-key stumpwm:*root-map* (stumpwm:kbd "f")  "exec firefox")

;; settings
(setf *mouse-focus-policy*  :sloppy) ;; :click :ignore :sloppy -- Focus follows mouse
(setf *window-border-stlye* :none) ;; :none :thick :thin :tight -- no borders
